<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ver Perfil Personal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    :root {
        --accent1: #F95738;
        --accent2: #EE964B;
        --accent3: #F4D35E;
        --accent4: #0D3B66;
        --light: #FAF0CA;
        --white: #FFFFFF;
        --black: #333333;
        --gray: #666666;
        --light-gray: #F8F9FA;
        --border: #E9ECEF;
        --card-bg: #FFFFFF;
        --header-bg: #FFFFFF;
        --main-bg: #F8F9FA;
        --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        --shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.15);
        --gradient-primary: linear-gradient(135deg, var(--accent4), #1a5080);
        --gradient-secondary: linear-gradient(135deg, var(--accent3), #e9c440);
        --gradient-accent: linear-gradient(135deg, var(--accent1), #ff6b4a);
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: var(--main-bg);
        color: var(--black);
        margin: 0;
        min-height: 100vh;
    }

    .main-header {
        background: var(--gradient-primary);
        color: var(--white);
        padding: 18px 25px;
        border-radius: 12px;
        margin-bottom: 25px;
        box-shadow: var(--shadow);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .main-header h1 {
        color: var(--white);
        font-weight: 700;
        font-size: 1.8rem;
        margin: 0;
    }

    .header-icons {
        display: flex;
        gap: 20px;
    }

    .header-icons i {
        font-size: 1.5rem;
        color: var(--accent3);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .header-icons i:hover {
        transform: scale(1.1);
        color: var(--white);
    }

    .profile-container {
        background: var(--card-bg);
        padding: 2.5rem;
        border-radius: 16px;
        box-shadow: var(--shadow);
        border-top: 4px solid var(--accent4);
        margin-bottom: 2rem;
        height: 100%;
    }
    
    .main-content-wrapper {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
    }

    .profile-container h2 {
        color: var(--accent4);
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 0.5rem;
        text-align: center;
    }

    .profile-subtitle {
        color: var(--gray);
        text-align: center;
        margin-bottom: 2rem;
        font-size: 1.1rem;
    }

    .input-container {
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        background: var(--white);
        transition: all 0.3s ease;
        position: relative;
    }

    .input-container legend {
        font-weight: 600;
        color: var(--accent4);
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        padding: 0 0.5rem;
        margin-bottom: 0.5rem;
        background: var(--white);
        width: auto;
    }

    .form-control[disabled], .form-select[disabled] {
        background-color: var(--light-gray);
        opacity: 1;
        cursor: default;
        border: 2px solid var(--border);
        color: var(--black);
    }

    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
    }

    .btn {
        padding: 0.75rem 2rem;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
    }

    .btn-primary {
        background: var(--gradient-primary);
        color: var(--white);
        box-shadow: var(--shadow);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-hover);
        color: var(--white);
    }
    
    .stats-panel {
        background: var(--card-bg);
        padding: 2.5rem;
        border-radius: 16px;
        box-shadow: var(--shadow);
        border-top: 4px solid var(--accent2);
        margin-bottom: 2rem;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    
    .stat-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
        border-bottom: 1px dashed var(--border);
        font-size: 1.1rem;
        font-weight: 500;
    }
    
    .stat-item:last-child {
        border-bottom: none;
    }
    
    .stat-item strong {
        color: var(--accent4);
        font-size: 1.2rem;
        font-weight: 700;
    }
    .stat-item i {
        margin-right: 10px;
        color: var(--accent1);
    }

    /* Estilos para las listas detalladas */
    .stats-list {
        list-style: none;
        padding-left: 0;
        margin-bottom: 1.5rem;
    }
    .stats-list-item {
        background-color: var(--light-gray); 
        padding: 0.5rem 1rem;
        margin-bottom: 0.5rem;
        border-radius: 8px;
        font-size: 0.95rem;
        font-weight: 500;
        color: var(--black);
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        transition: transform 0.2s;
    }
    .stats-list-item:hover {
        transform: translateX(5px);
    }
    .stats-list-title {
        color: var(--accent4);
        font-weight: 700;
        font-size: 1.2rem;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        padding-bottom: 5px;
        border-bottom: 2px solid var(--accent2);
        display: flex;
        align-items: center;
    }

    @media (max-width: 768px) {
        .profile-container, .stats-panel {
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .d-flex {
            flex-direction: column;
            gap: 1rem;
        }

        .btn {
            width: 100%;
            justify-content: center;
        }
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .main-content-wrapper {
        animation: slideIn 0.6s ease-out;
    }
</style>
</head>
<body>
    <header class="main-header container-fluid">
        <h1>Mi Perfil de Usuario</h1>
        <div class="header-icons">
            <i class="fa-solid fa-bell"></i>
            <i class="fa-solid fa-user"></i>
        </div>
    </header>

    <div class="main-content-wrapper">
        
        
        <div class="row g-4">
            
                        <div class="col-lg-{% if rol_usuario|trim == 'Profesor' %}8{% else %}12{% endif %}"> 
                <div class="profile-container">
                    <h2><i class="fas fa-id-card me-2"></i>Información Personal</h2>
                    <p class="profile-subtitle">Tu rol es **{{ rol_usuario }}**. Estos son tus datos registrados. Todos los campos son de solo lectura.</p>

                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            <div class="flash-messages">
                                {% for category, message in messages %}
                                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                                        <i class="fas fa-{% if category == 'success' %}check-circle{% elif category == 'danger' %}exclamation-triangle{% else %}info-circle{% endif %} me-2"></i>
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    {% endwith %}

                    <div>
                        <div class="form-grid">
                            <fieldset class="input-container">
                                <legend>Tipo de Documento</legend>
                                <input type="text" class="form-control" value="{{ form.tipo_doc.data or 'N/A' }}" disabled>
                            </fieldset>

                            <fieldset class="input-container">
                                <legend>Número de Identidad</legend>
                                <input type="text" class="form-control" value="{{ form.no_identidad.data or 'N/A' }}" disabled>
                            </fieldset>
                        </div>

                        <div class="form-grid">
                            <fieldset class="input-container">
                                <legend>Nombre</legend>
                                <input type="text" class="form-control" value="{{ form.nombre.data or 'N/A' }}" disabled>
                            </fieldset>

                            <fieldset class="input-container">
                                <legend>Apellido</legend>
                                <input type="text" class="form-control" value="{{ form.apellido.data or 'N/A' }}" disabled>
                            </fieldset>
                        </div>

                        <fieldset class="input-container">
                            <legend>Correo Electrónico</legend>
                            <input type="email" class="form-control" value="{{ form.correo.data or 'N/A' }}" disabled>
                        </fieldset>

                        <fieldset class="input-container">
                            <legend>Teléfono</legend>
                            <input type="tel" class="form-control" value="{{ form.telefono.data or 'N/A' }}" disabled>
                        </fieldset>

                        <div class="form-grid">
                            <fieldset class="input-container">
                                <legend>Estado de Cuenta</legend>
                                <input type="text" class="form-control" value="{{ form.estado_cuenta.data or 'N/A' }}" disabled>
                            </fieldset>

                            <fieldset class="input-container">
                                <legend>Rol de Usuario</legend>
                                <input type="text" class="form-control" value="{{ form.rol.data or rol_usuario }}" disabled>
                            </fieldset>
                        </div>

                        <div class="d-flex justify-content-end align-items-center mt-4">
                            <a href="{{ url_for('perfil.editar_perfil') }}" class="btn btn-primary">
                                <i class="fas fa-user-edit me-2"></i>Editar Perfil
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
                        {% if rol_usuario|trim == 'Profesor' %}
            <div class="col-lg-4"> 
                <div class="stats-panel">
                    <div>
                        <h5 class="mb-4 text-center" style="color: var(--accent4); font-weight: 700;">
                            <i class="fas fa-graduation-cap me-2"></i>Detalles de Actividad
                        </h5>
                        
                        <p class="stats-list-title">
                            <i class="fas fa-chalkboard-teacher me-2"></i>Asignaturas Dictadas ({{ asignaturas_list|length or 0 }})
                        </p>
                        <ul class="stats-list">
                            {% for asignatura in asignaturas_list %}
                                <li class="stats-list-item">{{ asignatura }}</li>
                            {% else %}
                                <li class="text-muted small">No hay asignaturas asignadas actualmente.</li>
                            {% endfor %}
                        </ul>

                        <p class="stats-list-title">
                            <i class="fas fa-school me-2"></i>Cursos Únicos ({{ cursos_list|length or 0 }})
                        </p>
                        <ul class="stats-list">
                            {% for curso in cursos_list %}
                                <li class="stats-list-item">{{ curso }}</li>
                            {% else %}
                                <li class="text-muted small">No está dictando clases en ningún curso.</li>
                            {% endfor %}
                        </ul>
                        
                        <div class="stat-item mt-3">
                            <span><i class="fas fa-calendar-alt"></i>Total Bloques de Horario</span>
                            <strong>{{ total_horarios or 0 }}</strong>
                        </div>
                    </div>
                    
                    <p class="text-muted small mt-4 pt-3 border-top text-center" style="border-top-color: var(--border) !important;">
                        Detalle de tus responsabilidades como {{ rol_usuario }}.
                    </p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>